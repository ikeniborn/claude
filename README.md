# init_claude - –ó–∞–ø—É—Å–∫ Claude Code —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏

> –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∫—Å–∏ –∏ –∑–∞–ø—É—Å–∫ Claude Code. –í–≤–µ–¥–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–¥–∏–Ω —Ä–∞–∑ - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ.

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ß—Ç–æ —ç—Ç–æ?](#—á—Ç–æ-—ç—Ç–æ)
- [–í–∞—Ä–∏–∞–Ω—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏](#–≤–∞—Ä–∏–∞–Ω—Ç—ã-—É—Å—Ç–∞–Ω–æ–≤–∫–∏)
  - [üì¶ –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)](#-–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
  - [üñ•Ô∏è –°–∏—Å—Ç–µ–º–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞](#Ô∏è-—Å–∏—Å—Ç–µ–º–Ω–∞—è-—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
  - [üîç –í—ã–±–æ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –ø—Ä–æ–∫—Å–∏](#-–≤—ã–±–æ—Ä-–ø—Ä–æ—Ç–æ–∫–æ–ª–∞-–ø—Ä–æ–∫—Å–∏-https-vs-http-vs-socks5)
- [–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ](#–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
- [Troubleshooting](#troubleshooting)

---

## –ß—Ç–æ —ç—Ç–æ?

–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ Claude Code —á–µ—Ä–µ–∑ HTTP/HTTPS –ø—Ä–æ–∫—Å–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–∫.

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∫—Å–∏ –æ–¥–∏–Ω —Ä–∞–∑
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ credentials
‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ HTTP –∏ HTTPS –ø—Ä–æ–∫—Å–∏ (SOCKS5 –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
‚úÖ **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞** - –ø–æ—Ä—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ git
‚úÖ **–í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–µ –≤–µ—Ä—Å–∏–∏** —á–µ—Ä–µ–∑ lockfile

---

## –í–∞—Ä–∏–∞–Ω—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –≤–∞—Ä–∏–∞–Ω—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–∏—Ö –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π.

### üì¶ –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–∑–º–µ—â–∞–µ—Ç NVM, Node.js –∏ Claude Code –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ (`.nvm-isolated/`). –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –ø–æ—Ä—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –∏ –∏–∑–±–µ–≥–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞–º–∏.

#### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

‚úÖ –ù—É–∂–Ω–∞ –ø–æ—Ä—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –º–∞—à–∏–Ω–∞–º–∏
‚úÖ –ò–∑–±–µ–∂–∞–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º Node.js/NVM
‚úÖ –†–∞–±–æ—Ç–∞ –±–µ–∑ sudo –Ω–∞ –¥—Ä—É–≥–∏—Ö –º–∞—à–∏–Ω–∞—Ö
‚úÖ –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–µ –≤–µ—Ä—Å–∏–∏ —á–µ—Ä–µ–∑ lockfile
‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–æ–º–º–∏—Ç–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ –≤ git

#### –ü–µ—Ä–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/ikeniborn/claude.git
cd claude

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
./init_claude.sh --isolated-install

# –≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç:
# - .nvm-isolated/                  (~278MB, –≤ git)
# - .nvm-isolated-lockfile.json     (lockfile —Å –≤–µ—Ä—Å–∏—è–º–∏, –≤ git)
```

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –¥—Ä—É–≥–æ–π –º–∞—à–∏–Ω–µ (git clone)

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ git**

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–≤–∫–ª—é—á–∞–µ—Ç .nvm-isolated/)
git clone https://github.com/ikeniborn/claude.git
cd claude

# 2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∏–º–ª–∏–Ω–∫–∏ –ø–æ—Å–ª–µ git clone
./init_claude.sh --repair-isolated

# 3. –ì–æ—Ç–æ–≤–æ! –ó–∞–ø—É—Å–∫
./init_claude.sh
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–∑ lockfile (–ª–µ–≥—á–µ –¥–ª—è git)**

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–≤–∫–ª—é—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ lockfile)
git clone https://github.com/ikeniborn/claude.git
cd claude

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ lockfile (—Ç–æ—á–Ω—ã–µ –≤–µ—Ä—Å–∏–∏)
./init_claude.sh --install-from-lockfile

# 3. –ì–æ—Ç–æ–≤–æ! –ó–∞–ø—É—Å–∫
./init_claude.sh
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
./init_claude.sh --check-isolated

# –í—ã–≤–æ–¥:
# - –í–µ—Ä—Å–∏–∏ Node.js, npm, Claude Code
# - –°—Ç–∞—Ç—É—Å —Å–∏–º–ª–∏–Ω–∫–æ–≤ (‚úì/‚úó)
# - –°–æ–¥–µ—Ä–∂–∏–º–æ–µ lockfile
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Claude Code

```bash
# –û–±–Ω–æ–≤–∏—Ç—å Claude Code –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏
./init_claude.sh --update

# –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
# ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è Claude Code –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏
# ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è lockfile —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π
# ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —Å–∏–º–ª–∏–Ω–∫–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ lockfile –æ–±–Ω–æ–≤–∏–ª—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
./init_claude.sh --check-isolated
# –î–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å:
# - Claude Code: X.X.X
# - claudeCodeVersion: "X.X.X" (–≤ lockfile)
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ù–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ –æ—Ç 24.10.2025, –ø—Ä–æ–±–ª–µ–º–∞ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º lockfile –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞. Lockfile —Ç–µ–ø–µ—Ä—å –≤—Å–µ–≥–¥–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–º–µ—Å—Ç–µ —Å Claude Code.

#### –û—á–∏—Å—Ç–∫–∞

```bash
# –£–¥–∞–ª–∏—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç lockfile)
./init_claude.sh --cleanup-isolated

# –î–ª—è –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∏:
./init_claude.sh --install-from-lockfile
```

---

### üñ•Ô∏è –°–∏—Å—Ç–µ–º–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

–°–∏—Å—Ç–µ–º–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–∑–º–µ—â–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É `init_claude` –≤ `/usr/local/bin/` –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–π –∏–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π NVM –¥–ª—è Claude Code.

#### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

‚úÖ –ù—É–∂–Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚úÖ –£–∂–µ –µ—Å—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π Node.js
‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ—Ä—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–æ (—Ç—Ä–µ–±—É–µ—Ç sudo)
cd /path/to/claude
sudo ./init_claude.sh --install

# –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–æ–º–∞–Ω–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –∏–∑ –ª—é–±–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
init_claude --help
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**

–ü—Ä–∏ –ø–µ—Ä–≤–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–µ —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:
- ‚úÖ Node.js –∏ npm (–µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç) - —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π NodeSource
- ‚úÖ Claude Code (–µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç) - —á–µ—Ä–µ–∑ `npm install -g @anthropic-ai/claude-code`

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Claude Code

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
init_claude --check-update

# –û–±–Ω–æ–≤–∏—Ç—å –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏
sudo init_claude --update  # –î–ª—è —Å–∏—Å—Ç–µ–º–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏
# –∏–ª–∏
init_claude --update       # –î–ª—è NVM —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (–±–µ–∑ sudo)
```

#### –£–¥–∞–ª–µ–Ω–∏–µ

```bash
# –£–¥–∞–ª–∏—Ç—å –∫–æ–º–∞–Ω–¥—É (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∫—Å–∏)
sudo init_claude --uninstall

# –û—á–∏—Å—Ç–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∫—Å–∏
init_claude --clear
```

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∏–ª–∏ —Å–∏—Å—Ç–µ–º–Ω–æ–π) –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ.

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

```bash
# –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
./init_claude.sh

# –°–∏—Å—Ç–µ–º–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
init_claude
```

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø–æ–ø—Ä–æ—Å–∏—Ç –≤–≤–µ—Å—Ç–∏ proxy URL –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
```
http://username:password@host:port
https://username:password@host:port
```

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** SOCKS5 –ø—Ä–æ–∫—Å–∏ –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è Claude Code –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ undici.

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
http://alice:secret123@127.0.0.1:8118
https://user:pass@proxy.example.com:8118
```

### –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏

```bash
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
./init_claude.sh  # –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è
init_claude       # —Å–∏—Å—Ç–µ–º–Ω–∞—è
```

### –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å HTTPS –ø—Ä–æ–∫—Å–∏

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `--proxy-ca` –¥–ª—è HTTPS –ø—Ä–æ–∫—Å–∏ —Å —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–º–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏:

```bash
# SECURE (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
./init_claude.sh --proxy https://proxy:8118 --proxy-ca /path/to/proxy-cert.pem
```

**–ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `--proxy-insecure` (–æ—Ç–∫–ª—é—á–∞–µ—Ç TLS –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π):

```bash
# ‚ö†Ô∏è INSECURE (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
./init_claude.sh --proxy https://proxy:8118 --proxy-insecure
```

–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø—Ä–æ–∫—Å–∏:
```bash
# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
openssl s_client -showcerts -connect proxy.example.com:8118 < /dev/null 2>/dev/null | \
  openssl x509 -outform PEM > proxy-cert.pem

# –ò–ª–∏ –ø–æ–ª—É—á–∏—Ç—å —Å–ø—Ä–∞–≤–∫—É
./init_claude.sh --help-export-cert
```

### üîç –í—ã–±–æ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –ø—Ä–æ–∫—Å–∏: HTTPS vs HTTP vs SOCKS5

#### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)

| –ü—Ä–æ—Ç–æ–∫–æ–ª | –°—Ç–∞—Ç—É—Å | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|----------|--------|--------------|
| **HTTPS** | ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ | **‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** |
| **HTTP** | ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ | ‚ö†Ô∏è Fallback –≤–∞—Ä–∏–∞–Ω—Ç |
| **SOCKS5** | ‚ùå **–ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è** | ‚ùå –í—ã–∑—ã–≤–∞–µ—Ç –∫—Ä–∞—à –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |

**–ò—Å—Ç–æ—á–Ω–∏–∫:** [Claude Code: Corporate Proxy Configuration](https://docs.claude.com/en/docs/claude-code/corporate-proxy)

---

#### ‚úÖ HTTPS –ø—Ä–æ–∫—Å–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω Anthropic
- ‚úÖ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç‚Üî–ø—Ä–æ–∫—Å–∏
- ‚úÖ –ó–∞—â–∏—Ç–∞ credentials –æ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ `NODE_EXTRA_CA_CERTS`

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —É—è–∑–≤–∏–º–æ—Å—Ç—å:** undici –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —Ü–µ–ª–µ–≤—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ ([HackerOne #1583680](https://hackerone.com/reports/1583680))
- ‚ö†Ô∏è –ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –≤–µ—Å—å HTTPS —Ç—Ä–∞—Ñ–∏–∫ (MitM)
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –¥–æ–≤–µ—Ä–∏—è –∫ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä—É

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- ‚úÖ –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å–µ—Ç–∏ —Å –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º –ø—Ä–æ–∫—Å–∏
- ‚úÖ –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –ø—Ä–æ–∫—Å–∏ –≤ –≤–∞—à–µ–º –∫–æ–Ω—Ç—Ä–æ–ª–µ
- ‚úÖ –ö–æ–≥–¥–∞ –≤–∞–∂–Ω–∞ –∑–∞—â–∏—Ç–∞ credentials

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```bash
# –° —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º (SECURE)
./init_claude.sh --proxy https://proxy:8118 --proxy-ca /path/to/cert.pem

# –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
./init_claude.sh --proxy https://proxy:8118 --proxy-insecure
```

---

#### ‚ö†Ô∏è HTTP –ø—Ä–æ–∫—Å–∏ (fallback)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã)
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ fallback –µ—Å–ª–∏ HTTPS –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå **–í–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º —Ç–µ–∫—Å—Ç–æ–º** –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ –ø—Ä–æ–∫—Å–∏
- ‚ùå –ü—Ä–æ–∫—Å–∏ –≤–∏–¥–∏—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã, –≤–∫–ª—é—á–∞—è API –∫–ª—é—á–∏ Claude
- ‚ùå –£—è–∑–≤–∏–º –∫ –ø–µ—Ä–µ—Ö–≤–∞—Ç—É –Ω–∞ —Å–µ—Ç–µ–≤–æ–º —É—Ä–æ–≤–Ω–µ
- ‚ùå –¢–∞ –∂–µ —É—è–∑–≤–∏–º–æ—Å—Ç—å undici —Å –Ω–µ–ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- ‚ö†Ô∏è –¢–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–∫—Å–∏ (localhost)
- ‚ö†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
- ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ production

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```bash
# –¢–æ–ª—å–∫–æ –¥–ª—è localhost!
./init_claude.sh --proxy http://localhost:8118
```

---

#### ‚ùå SOCKS5 –ø—Ä–æ–∫—Å–∏ (–ù–ï –†–ê–ë–û–¢–ê–ï–¢)

**–°—Ç–∞—Ç—É—Å:** **–ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è**

**–ü—Ä–æ–±–ª–µ–º–∞:**
- Claude Code –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É `undici` –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- undici [–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç SOCKS –ø—Ä–æ—Ç–æ–∫–æ–ª](https://github.com/nodejs/undici/issues/2224)
- –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è **–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫—Ä–∞—à–∏—Ç—Å—è** —Å –æ—à–∏–±–∫–æ–π:
  ```
  InvalidArgumentError: Invalid URL protocol:
  the URL must start with `http:` or `https:`
  ```

**–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π Anthropic:**
> "This is a limitation of the undici proxy library that we use."
> ‚Äî [GitHub Issue #3387](https://github.com/anthropics/claude-code/issues/3387)

**–û–±—Ö–æ–¥–Ω—ã–µ –ø—É—Ç–∏:**
1. **HTTP/HTTPS –ø—Ä–æ–∫—Å–∏** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–º–µ—Å—Ç–æ SOCKS5
2. **Privoxy/squid** - –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫ SOCKS5 ‚Üí HTTP:
   ```bash
   # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å privoxy
   sudo apt install privoxy

   # –ù–∞—Å—Ç—Ä–æ–∏—Ç—å forward-socks5 –≤ /etc/privoxy/config
   forward-socks5 / 127.0.0.1:1080 .

   # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å privoxy –∫–∞–∫ HTTP –ø—Ä–æ–∫—Å–∏
   ./init_claude.sh --proxy http://127.0.0.1:8118
   ```
3. **LLM Gateway** (LiteLLM) —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π SOCKS5

---

#### üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤—ã–±–æ—Ä—É

**–î–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Å–µ—Ç–µ–π:**
```bash
# –õ–£–ß–®–ò–ô –í–ê–†–ò–ê–ù–¢: HTTPS —Å –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º
export HTTPS_PROXY=https://proxy.company.com:8118
export NODE_EXTRA_CA_CERTS=/etc/ssl/certs/company-proxy-ca.pem
./init_claude.sh
```

**–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (localhost):**
```bash
# –ü–†–ò–ï–ú–õ–ï–ú–û: HTTP –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏
export HTTP_PROXY=http://localhost:8118
export NO_PROXY="localhost,127.0.0.1"
./init_claude.sh
```

**–î–ª—è production:**
```bash
# –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ LiteLLM Gateway –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ –ø—Ä–æ–∫—Å–∏:
# - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (NTLM, Kerberos)
# - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é
# - –û–±—Ö–æ–¥ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π undici
```

---

#### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —É—è–∑–≤–∏–º–æ—Å—Ç—å undici ProxyAgent:**

–ù–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è HTTPS –∏–ª–∏ HTTP –ø—Ä–æ–∫—Å–∏, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ undici –∏–º–µ–µ—Ç —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É:

- ‚ùå **–ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã** —Ü–µ–ª–µ–≤—ã—Ö HTTPS —Å–µ—Ä–≤–µ—Ä–æ–≤ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
- ‚ùå –í–µ—Å—å HTTPS —Ç—Ä–∞—Ñ–∏–∫ **–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ —É—è–∑–≤–∏–º –∫ MitM –∞—Ç–∞–∫–∞–º** —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –ø—Ä–æ–∫—Å–∏
- ‚ùå –ü—Ä–∏ HTTP –ø—Ä–æ–∫—Å–∏ **–≤–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º —Ç–µ–∫—Å—Ç–æ–º** –∫–ª–∏–µ–Ω—Ç‚Üî–ø—Ä–æ–∫—Å–∏

**–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:**
- –ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å –∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ Anthropic API
- –ü—Ä–æ–∫—Å–∏ –≤–∏–¥–∏—Ç –≤–∞—à–∏ API –∫–ª—é—á–∏, –∫–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞, –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä—ã**

**–ò—Å—Ç–æ—á–Ω–∏–∫:** [HackerOne Report #1583680](https://hackerone.com/reports/1583680)

---

#### üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π | HTTPS | HTTP | SOCKS5 |
|----------|-------|------|--------|
| **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞** | ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç‚Üî–ø—Ä–æ–∫—Å–∏** | ‚úÖ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ | ‚ùå –û—Ç–∫—Ä—ã—Ç—ã–π —Ç–µ–∫—Å—Ç | N/A |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–æ–∫—Å–∏‚ÜîAPI** | ‚ö†Ô∏è –ë–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ | ‚ö†Ô∏è –ë–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ | N/A |
| **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã | ‚úÖ –ü—Ä–æ—Å—Ç–∞—è | N/A |
| **–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å–µ—Ç–∏** | ‚úÖ‚úÖ –õ—É—á—à–∏–π –≤—ã–±–æ—Ä | ‚ö†Ô∏è –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è | ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ |
| **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞** | ‚úÖ –•–æ—Ä–æ—à–∏–π –≤—ã–±–æ—Ä | ‚úÖ –ü—Ä–∏–µ–º–ª–µ–º–æ | ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ |
| **Production** | ‚úÖ –° –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º –ø—Ä–æ–∫—Å–∏ | ‚ùå –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è | ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ |

---

### –î—Ä—É–≥–∏–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ–∫—Å–∏
./init_claude.sh --proxy http://new:proxy@host:port

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–µ–∑ –ø—Ä–æ–∫—Å–∏
./init_claude.sh --no-proxy

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Å–∏ –±–µ–∑ –∑–∞–ø—É—Å–∫–∞ Claude
./init_claude.sh --test

# –û—á–∏—Å—Ç–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
./init_claude.sh --clear

# –ü–µ—Ä–µ–¥–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã –≤ Claude Code
./init_claude.sh -- --model claude-3-opus
```

---

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –û–±–Ω–æ–≤–∏—Ç—å Claude Code
./init_claude.sh --update

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
# ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç Claude Code –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏
# ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç lockfile —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π
# ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–∏–º–ª–∏–Ω–∫–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
./init_claude.sh --check-isolated

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤–µ—Ä—Å–∏–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç:
# Claude Code: 2.0.26
# claudeCodeVersion: "2.0.26" (–≤ lockfile)
```

**‚ú® –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (24.10.2025):** –ü—Ä–æ–±–ª–µ–º–∞ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º lockfile –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ä–µ–¥–µ –±—ã–ª–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞. –¢–µ–ø–µ—Ä—å lockfile –≤—Å–µ–≥–¥–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ `--update`.

### –°–∏—Å—Ç–µ–º–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
init_claude --check-update

# –û–±–Ω–æ–≤–∏—Ç—å (—Ç—Ä–µ–±—É–µ—Ç sudo –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏)
sudo init_claude --update

# –î–ª—è NVM —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (–±–µ–∑ sudo)
init_claude --update
```

---

## Troubleshooting

### SOCKS5 –ø—Ä–æ–∫—Å–∏ - –∫—Ä–∞—à –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:** `InvalidArgumentError: Invalid URL protocol: the URL must start with 'http:' or 'https:'`

**–ü—Ä–∏—á–∏–Ω–∞:** Claude Code –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç SOCKS5 –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ undici.

**–†–µ—à–µ–Ω–∏–µ:** –°–º. —Ä–∞–∑–¥–µ–ª [SOCKS5 –ø—Ä–æ–∫—Å–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç](#socks5-–ø—Ä–æ–∫—Å–∏-–Ω–µ-—Ä–∞–±–æ—Ç–∞–µ—Ç) –Ω–∏–∂–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTP/HTTPS –ø—Ä–æ–∫—Å–∏.

---

### –ü–æ—Å–ª–µ git clone —Å–∏–º–ª–∏–Ω–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–°–∏–º–ø—Ç–æ–º—ã:**
- `./init_claude.sh` –≤—ã–¥–∞–µ—Ç –æ—à–∏–±–∫–∏
- Claude Code –Ω–µ –Ω–∞–π–¥–µ–Ω
- –ö–æ–º–∞–Ω–¥—ã npm/node –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∏–º–ª–∏–Ω–∫–∏ –∏ –ø—Ä–∞–≤–∞
./init_claude.sh --repair-isolated

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
./init_claude.sh --check-isolated
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–º–ª–∏–Ω–∫–æ–≤

```bash
./init_claude.sh --check-isolated

# –í—ã–≤–æ–¥ –ø–æ–∫–∞–∂–µ—Ç —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–∏–º–ª–∏–Ω–∫–æ–≤:
# Symlinks Status:
#   ‚úì npm
#   ‚úì npx
#   ‚úì corepack
#   ‚úì claude
#
# –ï—Å–ª–∏ –µ—Å—Ç—å ‚úó - –∑–∞–ø—É—Å—Ç–∏—Ç—å --repair-isolated
```

### –ü—Ä–æ–∫—Å–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
./init_claude.sh --test

# –û—á–∏—Å—Ç–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –≤–≤–µ—Å—Ç–∏ –∑–∞–Ω–æ–≤–æ
./init_claude.sh --clear
./init_claude.sh
```

### HTTPS –ø—Ä–æ–∫—Å–∏ —Å —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º

**–ü—Ä–æ–±–ª–µ–º–∞:** `SSL certificate problem: self signed certificate`

**–†–µ—à–µ–Ω–∏–µ 1 (–±–µ–∑–æ–ø–∞—Å–Ω–æ):**
```bash
# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø—Ä–æ–∫—Å–∏
openssl s_client -showcerts -connect proxy:8118 < /dev/null 2>/dev/null | \
  openssl x509 -outform PEM > proxy-cert.pem

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å --proxy-ca
./init_claude.sh --proxy https://proxy:8118 --proxy-ca ./proxy-cert.pem
```

**–†–µ—à–µ–Ω–∏–µ 2 (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ):**
```bash
# –û—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É TLS (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
./init_claude.sh --proxy https://proxy:8118 --proxy-insecure
```

### Lockfile –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–°–∏–º–ø—Ç–æ–º—ã:**
- Claude Code –æ–±–Ω–æ–≤–∏–ª—Å—è, –Ω–æ –≤–µ—Ä—Å–∏—è –≤ lockfile –æ—Å—Ç–∞–ª–∞—Å—å —Å—Ç–∞—Ä–æ–π
- `./init_claude.sh --check-isolated` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏:
  ```
  Claude Code: 2.0.26
  claudeCodeVersion: "2.0.25"  ‚Üê –ù–ï –°–û–í–ü–ê–î–ê–ï–¢
  ```

**–†–µ—à–µ–Ω–∏–µ:**

‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –≤–µ—Ä—Å–∏–∏ –æ—Ç 24.10.2025** - –æ–±–Ω–æ–≤–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:
```bash
git pull
./init_claude.sh --update
```

–î–ª—è —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π —Å–∫—Ä–∏–ø—Ç–∞:
```bash
# –í—Ä—É—á–Ω—É—é –æ–±–Ω–æ–≤–∏—Ç—å lockfile
bash -c 'source ./init_claude.sh && save_isolated_lockfile'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
./init_claude.sh --check-isolated
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (NVM)

**–°–∏–º–ø—Ç–æ–º—ã:** `ENOTEMPTY` –æ—à–∏–±–∫–∏ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

**–†–µ—à–µ–Ω–∏–µ –¥–ª—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
```bash
# –û—á–∏—Å—Ç–∏—Ç—å –∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
./init_claude.sh --cleanup-isolated
./init_claude.sh --install-from-lockfile
```

**–†–µ—à–µ–Ω–∏–µ –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ NVM:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞)
init_claude --update

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
rm -rf ~/.nvm/versions/node/*/lib/node_modules/@anthropic-ai/.claude-code-*
npm install -g @anthropic-ai/claude-code@latest
```

### Git –Ω–∞ Windows - —Å–∏–º–ª–∏–Ω–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–∞ Windows —Å–∏–º–ª–∏–Ω–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∫–∞–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –í–∫–ª—é—á–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å–∏–º–ª–∏–Ω–∫–æ–≤ –≤ git
git config --global core.symlinks true

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
cd ..
rm -rf claude
git clone https://github.com/ikeniborn/claude.git
cd claude

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∏–º–ª–∏–Ω–∫–∏
./init_claude.sh --repair-isolated
```

### –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∏ —Å–∏—Å—Ç–µ–º–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏

**–°–∏–º–ø—Ç–æ–º—ã:** –°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞
./init_claude.sh --check-isolated

# –î–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π:
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ .nvm-isolated/ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ ./init_claude.sh

# –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º–Ω–æ–π:
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É init_claude (–±–µ–∑ ./)
init_claude
```

### SOCKS5 –ø—Ä–æ–∫—Å–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫—Ä–∞—à–∏—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π: `InvalidArgumentError: Invalid URL protocol`
- –û—à–∏–±–∫–∞: `the URL must start with 'http:' or 'https:'`

**–ü—Ä–∏—á–∏–Ω–∞:**
- Claude Code –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É undici, –∫–æ—Ç–æ—Ä–∞—è **–ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç SOCKS5**
- –≠—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –Ω–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–µ –¥–ª—è Claude Code

**–†–µ—à–µ–Ω–∏–µ:**

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTP/HTTPS –ø—Ä–æ–∫—Å–∏**
```bash
# –í–º–µ—Å—Ç–æ SOCKS5 –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTP/HTTPS
./init_claude.sh --proxy https://proxy:8118
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ–∫—Å–∏-–ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫ (Privoxy)**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å privoxy
sudo apt install privoxy

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å /etc/privoxy/config
echo "forward-socks5 / 127.0.0.1:1080 ." | sudo tee -a /etc/privoxy/config

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
sudo systemctl restart privoxy

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å privoxy –∫–∞–∫ HTTP –ø—Ä–æ–∫—Å–∏
./init_claude.sh --proxy http://127.0.0.1:8118
```

**–í–∞—Ä–∏–∞–Ω—Ç 3: LLM Gateway**
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LiteLLM Gateway —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π SOCKS5
# –°–º. https://docs.litellm.ai/
```

**–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫:**
- [GitHub Issue #3387](https://github.com/anthropics/claude-code/issues/3387)
- [Claude Docs: Corporate Proxy](https://docs.claude.com/en/docs/claude-code/corporate-proxy)

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –§–∞–π–ª—ã

**–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:**
- `.nvm-isolated/` - –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ NVM (~278MB, –≤ git)
- `.nvm-isolated-lockfile.json` - lockfile —Å –≤–µ—Ä—Å–∏—è–º–∏ (–≤ git)
- `.claude_proxy_credentials` - –ø—Ä–æ–∫—Å–∏ credentials (chmod 600, –ù–ï –≤ git)

**–°–∏—Å—Ç–µ–º–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:**
- `/usr/local/bin/init_claude` - –≥–ª–æ–±–∞–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞
- `~/.claude_proxy_credentials` - –ø—Ä–æ–∫—Å–∏ credentials (chmod 600)

### –°–ø—Ä–∞–≤–∫–∞

```bash
# –ü–æ–ª–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞
./init_claude.sh --help
init_claude --help

# –°–ø—Ä–∞–≤–∫–∞ –ø–æ —ç–∫—Å–ø–æ—Ä—Ç—É —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
./init_claude.sh --help-export-cert
```

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://github.com/ikeniborn/claude
- Issues: https://github.com/ikeniborn/claude/issues
