# GitHub PR Best Practices

**Version:** 1.0.0
**Last Updated:** 2026-01-13

---

## PR Title Format

Follow [Conventional Commits](https://www.conventionalcommits.org/) specification:

```
<type>(<scope>): <description>

Examples:
feat(frontend): add transaction filtering functionality
fix(api): handle null pointer in OrderValidator
refactor(state): extract ListsState from monolithic file
test(integration): add multi-tab coordination tests
docs(architecture): update testing infrastructure guide
```

### Types

- `feat` - New feature
- `fix` - Bug fix
- `refactor` - Code restructuring (no functional changes)
- `test` - Test additions/changes
- `docs` - Documentation only
- `style` - Formatting, missing semicolons (no code change)
- `perf` - Performance improvements
- `chore` - Maintenance tasks (build, dependencies)

### Scope

Scope should indicate the affected module or component:
- `frontend` - Frontend changes
- `backend` - Backend changes
- `api` - API endpoints
- `state` - State management
- `database` - Database schemas/migrations
- `ci` - CI/CD configuration
- `build` - Build system

### Description

- Max 72 characters
- Imperative mood ("add" not "added")
- No period at end
- Lowercase after colon

---

## PR Description

Auto-generated by `templates/pr-description.md.mustache`.

**Must include:**
- Summary of changes
- List of commits
- Files changed with stats (+/-)
- Test plan checklist
- Code quality checklist
- Related issues

**Optional:**
- Deployment notes
- Breaking changes warning
- Screenshots/videos

---

## Draft PR

Always create as **Draft PR** to allow time for:
- CI/CD checks to complete
- Error fixing (manual or via external loop tool)
- Code review preparation

Mark as "Ready for review" only when:
- All CI/CD checks pass (✓)
- No auto-fixable errors remain
- Code is ready for human review

---

## Branch Strategy

### Source Branch Naming

```
<type>/<slug>

Examples:
feature/add-transaction-filters
fix/null-pointer-validator
refactor/extract-order-validator
test/add-integration-tests
```

### Target Branch

- `test` - For testing and staging (most common)
- `prod` - For production deployment (requires approval)
- `main`/`master` - Main development branch

---

## Required Checks

All PRs must pass these checks before merge:

### TypeScript Projects
1. **TypeScript Type Check** - No type errors
2. **Unit & Integration Tests** - All tests pass
3. **Build Verification** - Successful production build
4. **Linting & Formatting** - ESLint + Prettier pass

### Coverage Thresholds
- Lines: ≥ 8.9%
- Functions: ≥ 84%
- Branches: ≥ 92%
- Statements: ≥ 8.9%

### Bundle Size
- Maximum: 500KB (gzipped)

---

## Auto-Labeling

GitHub Actions automatically adds labels based on:
- Branch name prefix (`feature/*` → `enhancement`)
- Modified file paths (`backend/*` → `backend`)
- PR title type (`fix:` → `bug`)

---

## Code Review

### Before Requesting Review
- ✅ All checks pass
- ✅ PR description complete
- ✅ Self-review completed
- ✅ No debug statements (`console.log`)
- ✅ No commented-out code
- ✅ No merge conflicts

### Review Process
1. Assign reviewers
2. Address feedback
3. Re-request review if needed
4. Squash merge when approved

---

## Merge Strategy

**Preferred:** Squash and merge

**Benefits:**
- Clean git history
- Single commit per feature
- Easy to revert

**Commit message format:**
```
<type>(<scope>): <description> (#PR-number)

Body from PR description (auto-generated)

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>
```

---

## PR Size Guidelines

**Small PR** (preferred):
- < 200 lines changed
- Single feature or fix
- Easy to review

**Medium PR**:
- 200-500 lines
- Multiple related changes
- Break into tasks if possible

**Large PR** (avoid):
- > 500 lines
- Split into multiple PRs

---

## Common Pitfalls

❌ **Don't:**
- Force push to PR branch (breaks review)
- Merge main into PR branch (use rebase)
- Include unrelated changes
- Skip PR template sections
- Mark as ready before checks pass

✅ **Do:**
- Keep PRs focused
- Write descriptive commit messages
- Respond to review comments
- Update PR description if scope changes
- Close PR if abandoned

---

## References

- [Conventional Commits](https://www.conventionalcommits.org/)
- [GitHub PR Best Practices](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests)
- [Semantic Versioning](https://semver.org/)
