# Architecture Documentation Template - Full Version
# Use for standard and complex projects with detailed component hierarchies
# Generated by @skill:architecture-documentation
#
# Placeholder syntax: {{field_name: type, constraints}}
# All IDs use kebab-case, descriptions minimum 10 characters

architecture:
  metadata:
    project_name: "{{project_name: string, from project_context}}"
    version: "{{version: semver, from package.json or default 1.0.0}}"
    description: "{{description: string, min 20 chars}}"
    architecture_style: "{{style: monolith|microservices|serverless|layered|hexagonal|event-driven}}"
    generated_at: "{{timestamp: ISO 8601 format}}"
    generated_by: "Claude Code - Architecture Documentation Skill v1.0.0"

  technology_stack:
    primary_language: "{{language: from project_context.language}}"
    language_version: "{{version: from runtime or manifest}}"
    frameworks:
      - "{{framework_name: string, version}}"
    databases:
      - name: "{{db_name: string}}"
        type: "{{sql|nosql|cache|search}}"
        version: "{{version: optional}}"
    external_services:
      - "{{service_name: string, purpose}}"
    build_tools: ["{{tool1}}", "{{tool2}}"]
    package_manager: "{{npm|yarn|pip|cargo|go mod}}"

  components:
    - id: "{{component_id: kebab-case, unique}}"
      name: "{{component_name: string, human-readable}}"
      type: "{{type: service|module|package|library|utility|api|database|external}}"
      path: "{{file_path: relative to project root}}"
      description: "{{description: string, min 10 chars, what it does}}"
      layer: "{{layer: presentation|business|data|infrastructure|optional}}"
      dependencies:
        - component_id: "{{dependency_id: must exist in components}}"
          type: "{{type: required|optional|dev|peer}}"
          version: "{{version_constraint: optional, semver range}}"
          reason: "{{reason: string, why this dependency exists}}"
      provides:
        - interface: "{{interface_name: string}}"
          type: "{{type: rest-api|graphql|grpc|library|event|cli}}"
          endpoints: ["{{endpoint1}}", "{{endpoint2}}"]
      responsibilities:
        - "{{responsibility: string, specific task this component handles}}"
      configuration:
        - key: "{{config_key: string}}"
          type: "{{env|file|secret|hardcoded}}"
          required: "{{true|false}}"
      metrics:
        lines_of_code: "{{loc: number, optional}}"
        complexity: "{{low|medium|high, based on dependencies}}"

  dependency_graph:
    metadata:
      total_nodes: "{{count: number}}"
      total_edges: "{{count: number}}"
      max_depth: "{{depth: number, from root to deepest node}}"
      circular_dependencies: "{{count: number, 0 is ideal}}"
    nodes:
      - id: "{{node_id: matches component_id}}"
        label: "{{node_label: component_name}}"
        type: "{{node_type: matches component.type}}"
        layer: "{{layer: optional}}"
    edges:
      - from: "{{source_id: component_id}}"
        to: "{{target_id: component_id}}"
        type: "{{dependency_type: required|optional|dev}}"
        description: "{{why_dependency: string, explain relationship}}"
        bidirectional: "{{true|false, indicates circular dependency}}"

  data_flow:
    - flow_id: "{{flow_id: kebab-case}}"
      name: "{{flow_name: string, e.g., 'User Authentication Flow'}}"
      trigger: "{{trigger: user action|scheduled|event|api call}}"
      steps:
        - step: "{{step_number: integer, sequential}}"
          component: "{{component_id: from components}}"
          action: "{{action_description: verb phrase, what happens}}"
          input: "{{input_data: description}}"
          output: "{{output_data: description}}"
          data_transformation: "{{transformation: how data changes}}"
      result: "{{final_result: what the flow produces}}"

  infrastructure:
    deployment_model: "{{model: cloud|on-premise|hybrid|edge}}"
    cloud_provider: "{{provider: aws|gcp|azure|cloudflare|none}}"
    runtime_environment: "{{runtime: nodejs|python|jvm|dotnet|docker|kubernetes}}"
    orchestration: "{{orchestration: kubernetes|docker-compose|systemd|none}}"
    configuration:
      - key: "{{config_key: string, environment variable name}}"
        source: "{{source: env|file|secret-manager|consul|etcd}}"
        required: "{{true|false}}"
        default: "{{default_value: optional}}"
    scaling:
      strategy: "{{strategy: horizontal|vertical|auto-scaling|none}}"
      min_instances: "{{min: number}}"
      max_instances: "{{max: number}}"

  security:
    authentication: "{{auth_mechanism: oauth|jwt|session|api-key|none}}"
    authorization: "{{authz_mechanism: rbac|abac|acl|none}}"
    data_encryption:
      at_rest: "{{true|false}}"
      in_transit: "{{true|false}}"
      algorithm: "{{algorithm: aes-256|rsa|tls|optional}}"
    security_boundaries:
      - boundary: "{{boundary_name: string, e.g., 'Public API'}}"
        components: ["{{comp1}}", "{{comp2}}"]
        protection: "{{protection: firewall|api-gateway|auth-middleware}}"
    secrets_management: "{{vault|aws-secrets|env-files|none}}"

  performance:
    scalability_pattern: "{{pattern: horizontal|vertical|auto-scaling|serverless}}"
    caching_strategy: "{{strategy: redis|memcached|in-memory|cdn|none}}"
    async_processing: "{{type: queue|event-driven|worker-pool|none}}"
    database_optimization: "{{optimization: indexing|partitioning|replication|none}}"
    monitoring: "{{tools: prometheus|grafana|datadog|cloudwatch|none}}"

  quality_attributes:
    - attribute: "{{attribute: availability|reliability|maintainability|performance|security}}"
      target: "{{target_value: string, e.g., '99.9% uptime'}}"
      measurement: "{{how_measured: string, e.g., 'uptime monitoring'}}"
      current_status: "{{status: met|not-met|in-progress|unknown}}"

  architectural_decisions:
    - decision_id: "{{adr_id: number, ADR-001}}"
      title: "{{title: string, decision made}}"
      date: "{{date: YYYY-MM-DD}}"
      status: "{{status: accepted|deprecated|superseded}}"
      context: "{{context: why decision was needed}}"
      decision: "{{decision: what was decided}}"
      consequences: "{{consequences: impact of decision}}"
