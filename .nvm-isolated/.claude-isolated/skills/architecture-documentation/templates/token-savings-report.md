# Token Savings Report Template

**Generated:** {{timestamp}}
**Project:** {{project_name}}
**Workflow:** {{workflow_name}}

---

## Summary

| Metric | Value |
|--------|-------|
| **Total YAML Tokens** | {{total_yaml_tokens}} |
| **Total TOON Tokens** | {{total_toon_tokens}} |
| **Absolute Savings** | {{absolute_savings}} tokens |
| **Percentage Savings** | {{percentage_savings}}% |
| **API Cost Saved** | ${{cost_saved}} |

---

## Data Breakdown

### Components

| Format | Tokens | Size (bytes) | Savings |
|--------|--------|--------------|---------|
| YAML/JSON | {{components_yaml_tokens}} | {{components_yaml_size}} | - |
| TOON | {{components_toon_tokens}} | {{components_toon_size}} | {{components_savings}}% |

**Components TOON:**
```
{{components_toon_preview}}
```

---

### Dependency Graph

| Format | Tokens | Size (bytes) | Savings |
|--------|--------|--------------|---------|
| YAML/JSON | {{graph_yaml_tokens}} | {{graph_yaml_size}} | - |
| TOON | {{graph_toon_tokens}} | {{graph_toon_size}} | {{graph_savings}}% |

**Graph TOON:**
```
{{graph_toon_preview}}
```

---

{{#if data_flow_toon}}
### Data Flow

| Format | Tokens | Size (bytes) | Savings |
|--------|--------|--------------|---------|
| YAML/JSON | {{dataflow_yaml_tokens}} | {{dataflow_yaml_size}} | - |
| TOON | {{dataflow_toon_tokens}} | {{dataflow_toon_size}} | {{dataflow_savings}}% |

**Data Flow TOON:**
```
{{dataflow_toon_preview}}
```
{{/if}}

---

{{#if quality_attributes_toon}}
### Quality Attributes

| Format | Tokens | Size (bytes) | Savings |
|--------|--------|--------------|---------|
| YAML/JSON | {{qa_yaml_tokens}} | {{qa_yaml_size}} | - |
| TOON | {{qa_toon_tokens}} | {{qa_toon_size}} | {{qa_savings}}% |

**Quality Attributes TOON:**
```
{{qa_toon_preview}}
```
{{/if}}

---

## Workflow Impact

### Token Usage Reduction

**Before TOON (YAML only):**
- architecture-documentation → validation-framework: {{workflow_before_tokens}} tokens
- API calls per workflow: {{api_calls_per_workflow}}
- Total tokens: {{workflow_before_tokens}} × {{api_calls_per_workflow}} = {{total_before_tokens}} tokens

**After TOON (hybrid):**
- architecture-documentation → validation-framework: {{workflow_after_tokens}} tokens
- API calls per workflow: {{api_calls_per_workflow}}
- Total tokens: {{workflow_after_tokens}} × {{api_calls_per_workflow}} = {{total_after_tokens}} tokens

**Savings:** {{workflow_total_savings}} tokens ({{workflow_savings_percent}}%)

---

### Cost Savings

**Assumptions:**
- API pricing: ${{api_price_per_1k}} per 1K tokens
- Workflow runs per month: {{runs_per_month}}

**Monthly savings:**
- Tokens saved per run: {{absolute_savings}}
- Total monthly savings: {{absolute_savings}} × {{runs_per_month}} = {{monthly_tokens_saved}} tokens
- Cost savings: {{monthly_tokens_saved}} / 1000 × ${{api_price_per_1k}} = **${{monthly_cost_saved}}**

**Annual savings:**
- **${{annual_cost_saved}}** ({{monthly_cost_saved}} × 12)

---

## Historical Tracking

{{#each history}}
### {{date}}

| Metric | Value |
|--------|-------|
| Components | {{component_count}} |
| Dependencies | {{dependency_count}} |
| YAML Tokens | {{yaml_tokens}} |
| TOON Tokens | {{toon_tokens}} |
| Savings | {{savings_percent}}% |
{{/each}}

---

## Recommendations

{{#if percentage_savings < 30}}
⚠️ **Low savings** ({{percentage_savings}}% < 30%)

**Possible reasons:**
- Small dataset (< 10 components)
- Deeply nested metadata (> 3 levels)
- Irregular schema (mixed data types)

**Action:** Consider using YAML-only for this dataset.
{{else if percentage_savings > 50}}
✅ **Excellent savings** ({{percentage_savings}}% > 50%)

**Analysis:**
- Tabular data with consistent schema
- Large dataset ({{component_count}} components)
- Nested graph structures benefit from TOON

**Action:** Continue using TOON for similar workflows.
{{else}}
✓ **Good savings** (30% < {{percentage_savings}}% < 50%)

**Analysis:**
- Mixed data types (components + graphs)
- Standard dataset size
- Expected performance for TOON

**Action:** Maintain current TOON usage.
{{/if}}

---

## Validation Results

{{#each validation_results}}
### {{validation_name}}

| Check | Result |
|-------|--------|
| TOON Syntax Valid | {{toon_syntax_valid}} |
| Round-trip Test | {{round_trip_test}} |
| Data Fidelity | {{data_fidelity}} |
| Parsing Accuracy | {{parsing_accuracy}} |
{{/each}}

---

## Next Steps

1. **Monitor trends:** Track token savings over multiple workflows
2. **Optimize datasets:** Identify opportunities for higher savings (> 50%)
3. **Expand TOON usage:** Apply to other skills (structured-planning, validation-framework)
4. **Cost tracking:** Monitor real API costs vs projected savings

---

**Report generated by:** architecture-documentation v1.2.0
**TOON library:** @toon-format/toon@2.1.0
**Converter:** toon-converter.mjs v1.0.0
