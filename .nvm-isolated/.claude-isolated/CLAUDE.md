# CLAUDE.md

## LANGUAGE
- –î–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å–≤–∏–∏ —Å –ø–æ–ª—å–∑–≤–æ–∞—Ç–µ–ª–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä—É—Å—Å–∫–∏–∏–π —è–∑—ã–∫ (ru)

## TABLE OF CONTENTS

### UNIVERSAL WORKFLOW EXECUTION RULES
1. [Critical Principles (P1-P5)](#part-i-universal-workflow-execution-rules)
2. [High Priority Rules (P6-P10)](#2-high-priority-rules-p6-p10)
3. [Medium Priority Rules (P11-P13)](#3-medium-priority-rules-p11-p13)
4. [Prohibited & Mandatory Actions](#4-prohibited--mandatory-actions)
5. [Standard Formats](#5-standard-formats)

# UNIVERSAL WORKFLOW EXECUTION RULES

## 1. CRITICAL PRINCIPLES (P1-P5)

### P1: Sequential Execution (CRITICAL)
**–ü—Ä–∞–≤–∏–ª–æ:** –í—ã–ø–æ–ª–Ω—è–π—Ç–µ —Ñ–∞–∑—ã –∏ actions –°–¢–†–û–ì–û –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ.

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:**
- ‚úì –í—ã–ø–æ–ª–Ω—è–π—Ç–µ —Ñ–∞–∑—ã –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
- ‚úì –í—ã–ø–æ–ª–Ω—è–π—Ç–µ –≤—Å–µ actions –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–∑—ã –ø–æ –ø–æ—Ä—è–¥–∫—É
- ‚úì –ù–ï –ø—Ä–æ–ø—É—Å–∫–∞–π—Ç–µ —Ñ–∞–∑—ã
- ‚úì –ù–ï –ø—Ä–æ–ø—É—Å–∫–∞–π—Ç–µ actions
- ‚úì –ù–ï –º–µ–Ω—è–π—Ç–µ –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–ù–∞—Ä—É—à–µ–Ω–∏–µ:** FATAL - –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞

---

### P2: Thinking Requirement (CRITICAL)
**–ü—Ä–∞–≤–∏–ª–æ:** –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `<thinking>` –ø–µ—Ä–µ–¥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ä–µ—à–µ–Ω–∏—è–º–∏.

**–ö–æ–≥–¥–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω thinking:**
- –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∫–∞–∂–¥–æ–π —Ñ–∞–∑—ã
- –ü–µ—Ä–µ–¥ actions –ø–æ–º–µ—á–µ–Ω–Ω—ã–º–∏ `requires_thinking="true"`
- –ü–µ—Ä–µ–¥ actions —Å `validation="critical"`
- –ü–µ—Ä–µ–¥ –ø—Ä–∏–Ω—è—Ç–∏–µ–º –≤–∞–∂–Ω—ã—Ö —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π
- –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –º–µ–∂–¥—É –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–º–∏ –ø–æ–¥—Ö–æ–¥–∞–º–∏

**–ß—Ç–æ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å thinking:**
- –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π —Å–∏—Ç—É–∞—Ü–∏–∏
- –û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–æ–≤
- –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è
- –†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤
- –ü–ª–∞–Ω –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

**–§–æ—Ä–º–∞—Ç thinking:**
```xml
<thinking>
1. –ê–ù–ê–õ–ò–ó: [—á—Ç–æ –∏–º–µ–µ–º]
2. –û–ü–¶–ò–ò: [–∫–∞–∫–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã]
3. –í–´–ë–û–†: [—á—Ç–æ –≤—ã–±–∏—Ä–∞–µ–º –∏ –ø–æ—á–µ–º—É]
4. –†–ò–°–ö–ò: [—á—Ç–æ –º–æ–∂–µ—Ç –ø–æ–π—Ç–∏ –Ω–µ —Ç–∞–∫]
5. –í–ê–õ–ò–î–ê–¶–ò–Ø: [–∫–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏–º]
</thinking>
```

**–ù–∞—Ä—É—à–µ–Ω–∏–µ:** FATAL - –¥–µ–π—Å—Ç–≤–∏–µ –ù–ï –í–´–ü–û–õ–ù–Ø–ï–¢–°–Ø –±–µ–∑ thinking

---

### P3: Mandatory Output Enforcement (CRITICAL)
**–ü—Ä–∞–≤–∏–ª–æ:** –í—ã–≤–æ–¥–∏—Ç–µ –í–°–ï –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ outputs –≤ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö.

**–ö–æ–≥–¥–∞ output –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω:**
- Action –ø–æ–º–µ—á–µ–Ω `output="required"`
- Action –∏–º–µ–µ—Ç `mandatory_output` —Å–µ–∫—Ü–∏—é
- Action –∏–º–µ–µ—Ç `mandatory_format` —Å–µ–∫—Ü–∏—é
- Checkpoint —Ç—Ä–µ–±—É–µ—Ç verification_instruction

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:**
- ‚úì –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¢–û–ß–ù–û —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
- ‚úì –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –í–°–ï —Å–µ–∫—Ü–∏–∏ mandatory_format
- ‚úì –ù–ï —Å–æ–∫—Ä–∞—â–∞–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç—ã
- ‚úì –ù–ï –ø—Ä–æ–ø—É—Å–∫–∞–π—Ç–µ —Å–µ–∫—Ü–∏–∏
- ‚úì –ù–ï –∑–∞–º–µ–Ω—è–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç –Ω–∞ "—Å–≤–æ–π"

**–ù–∞—Ä—É—à–µ–Ω–∏–µ:** BLOCKING - –Ω–µ–ª—å–∑—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –±–µ–∑ output

---

### P4: Exit Conditions Verification (CRITICAL)
**–ü—Ä–∞–≤–∏–ª–æ:** –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ exit_conditions –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ–º.

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:**
- ‚úì –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –í–°–ï conditions –≤ exit_conditions
- ‚úì –ù–ï –ø—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –µ—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ condition –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
- ‚úì –í—ã–≤–µ–¥–∏—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥–æ–≥–æ condition —è–≤–Ω–æ
- ‚úì –ü—Ä–∏ –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ - –≤—ã–ø–æ–ª–Ω–∏—Ç–µ violation_action

**–¢–∏–ø–∏—á–Ω—ã–µ exit_conditions:**
- –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ actions –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- –í—Å–µ mandatory_outputs –≤—ã–≤–µ–¥–µ–Ω—ã
- Validation passed
- Checkpoint –ø—Ä–æ–π–¥–µ–Ω

**–ù–∞—Ä—É—à–µ–Ω–∏–µ:** FATAL - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É

---

### P5: Checkpoint Verification (HIGH)
**–ü—Ä–∞–≤–∏–ª–æ:** –ü—Ä–æ—Ö–æ–¥–∏—Ç–µ checkpoints —Å —è–≤–Ω–æ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –º–µ–∂–¥—É —Ñ–∞–∑–∞–º–∏.

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:**
- ‚úì –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –í–°–ï checks –≤ checkpoint
- ‚úì –í—ã–≤–µ–¥–∏—Ç–µ verification_instruction –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–∞
- ‚úì –ù–ï –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —Å–ª–µ–¥—É—é—â–µ–π —Ñ–∞–∑–µ –ø–æ–∫–∞ –í–°–ï checks != ‚úì
- ‚úì –í—ã–≤–æ–¥–∏—Ç–µ —Å—Ç–∞—Ç—É—Å checkpoint —è–≤–Ω–æ

**–§–æ—Ä–º–∞—Ç checkpoint verification:**
```
PHASE N CHECKPOINT:
[‚úì/‚úó] Check 1: [—Å—Ç–∞—Ç—É—Å –∏ –¥–µ—Ç–∞–ª–∏]
[‚úì/‚úó] Check 2: [—Å—Ç–∞—Ç—É—Å –∏ –¥–µ—Ç–∞–ª–∏]
[‚úì/‚úó] Check N: [—Å—Ç–∞—Ç—É—Å –∏ –¥–µ—Ç–∞–ª–∏]

–†–ï–ó–£–õ–¨–¢–ê–¢: ‚úì PASSED / ‚úó FAILED
–ü–µ—Ä–µ—Ö–æ–¥ –∫ Phase N+1: [ALLOWED/BLOCKED]
```

**–ù–∞—Ä—É—à–µ–Ω–∏–µ:** BLOCKING - –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–π —Ñ–∞–∑–µ

---

## 2. HIGH-PRIORITY RULES (P6-P10)

### P6: Entry Conditions Check (HIGH)
**–ü—Ä–∞–≤–∏–ª–æ:** –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ entry_conditions –ø–µ—Ä–µ–¥ –≤—Ö–æ–¥–æ–º –≤ —Ñ–∞–∑—É.

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:**
- ‚úì –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ entry conditions
- ‚úì –ü—Ä–∏ –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ - –≤—ã–ø–æ–ª–Ω–∏—Ç–µ violation_action
- ‚úì –ù–ï –Ω–∞—á–∏–Ω–∞–π—Ç–µ —Ñ–∞–∑—É –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è conditions

---

### P7: Blocking Actions Enforcement (HIGH)
**–ü—Ä–∞–≤–∏–ª–æ:** –î–ª—è actions —Å `blocking="true"` - —Å—Ç—Ä–æ–≥–æ —Å–ª–µ–¥—É–π—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º.

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:**
- ‚úì –ó–∞–≤–µ—Ä—à–∏—Ç–µ action –ø–æ–ª–Ω–æ—Å—Ç—å—é
- ‚úì –í—ã–≤–µ–¥–∏—Ç–µ mandatory_output
- ‚úì –ü—Ä–æ–≤–µ—Ä—å—Ç–µ exit_condition
- ‚úì –ù–ï –ø—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –¥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π

---

### P8: Validation Level Respect (HIGH)
**–ü—Ä–∞–≤–∏–ª–æ:** –í—ã–ø–æ–ª–Ω—è–π—Ç–µ validation –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —É—Ä–æ–≤–Ω–µ–º.

**–£—Ä–æ–≤–Ω–∏ validation:**
- `critical`: –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê–Ø –ø—Ä–æ–≤–µ—Ä–∫–∞, STOP –ø—Ä–∏ failure
- `standard`: –û–±—ã—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞, retry –ø—Ä–∏ failure
- `micro`: –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞, log –ø—Ä–∏ failure

**–î–ª—è validation="critical":**
- –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û thinking –ø–µ—Ä–µ–¥ action
- –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
- STOP –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–∏ failure
- –ù–ï –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

---

### P9: Error Handling Compliance (HIGH)
**–ü—Ä–∞–≤–∏–ª–æ:** –°–ª–µ–¥—É–π—Ç–µ error_handling –ø—Ä–∞–≤–∏–ª–∞–º –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö.

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:**
- ‚úì –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ç–∏–ø –æ—à–∏–±–∫–∏
- ‚úì –í—ã–ø–æ–ª–Ω–∏—Ç–µ —É–∫–∞–∑–∞–Ω–Ω—ã–π action (STOP/RETRY/ASK)
- ‚úì –í—ã–≤–µ–¥–∏—Ç–µ —É–∫–∞–∑–∞–Ω–Ω–æ–µ error message
- ‚úì –ù–ï –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ –æ—à–∏–±–∫–∏
- ‚úì –ù–ï –ø—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –ø—Ä–∏ STOP errors

---

### P10: Approval Gates Respect (HIGH)
**–ü—Ä–∞–≤–∏–ª–æ:** –î–ª—è approval_gate —Å `required="true"` - –∂–¥–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:**
- ‚úì –í—ã–≤–µ–¥–∏—Ç–µ approval gate message
- ‚úì –ñ–î–ò–¢–ï –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úì –ù–ï –ø—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úì –ü—Ä–µ–¥–ª–æ–∂–∏—Ç–µ –æ–ø—Ü–∏–∏ (yes/no/review)

---

## 3. MEDIUM-PRIORITY RULES (P11-P13)

### P11: Ask When Unclear (MEDIUM)
**–ü—Ä–∞–≤–∏–ª–æ:** –ü—Ä–∏ –Ω–µ—è—Å–Ω–æ—Å—Ç–∏ - –û–°–¢–ê–ù–û–í–ò–¢–ï–°–¨ –∏ —Å–ø—Ä–æ—Å–∏—Ç–µ.

**–ö–æ–≥–¥–∞ —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å:**
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω—ã
- –ù–µ—Å–∫–æ–ª—å–∫–æ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–π
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫—Ä–∏—Ç–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- –ù–µ—è—Å–µ–Ω –æ–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–§–æ—Ä–º–∞—Ç –≤–æ–ø—Ä–æ—Å–∞:**
```
‚ùì –¢–†–ï–ë–£–ï–¢–°–Ø –£–¢–û–ß–ù–ï–ù–ò–ï
–ù–µ—è—Å–Ω–æ: [—á—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ]
–í–∞—Ä–∏–∞–Ω—Ç—ã: [–æ–ø—Ü–∏–∏]
–í–æ–ø—Ä–æ—Å: [–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –≤–æ–ø—Ä–æ—Å]
```

---

### P12: Decision Documentation (MEDIUM)
**–ü—Ä–∞–≤–∏–ª–æ:** –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤–∞–∂–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è.

**–ß—Ç–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- –í—ã–±–æ—Ä –º–µ–∂–¥—É –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–º–∏ –ø–æ–¥—Ö–æ–¥–∞–º–∏
- –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—á–µ–≤–∏–¥–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- Trade-offs –∏ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã

---

### P13: Conditional Execution (MEDIUM)
**–ü—Ä–∞–≤–∏–ª–æ:** –í—ã–ø–æ–ª–Ω—è–π—Ç–µ conditional actions —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ condition.

---

## 4. PROHIBITED & MANDATORY ACTIONS

### –ù–ò–ö–û–ì–î–ê –ù–ï –î–ï–õ–ê–ô–¢–ï:
‚ùå –ù–ï –ø—Ä–æ–ø—É—Å–∫–∞–π—Ç–µ —Ñ–∞–∑—ã / actions / thinking / mandatory_output
‚ùå –ù–ï —Å–æ–∫—Ä–∞—â–∞–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç—ã
‚ùå –ù–ï –ø—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –ø—Ä–∏ critical failures
‚ùå –ù–ï –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ blocking conditions / exit_conditions / checkpoints
‚ùå –ù–ï –¥–µ–ª–∞–π—Ç–µ assumptions - ASK –ø—Ä–∏ –Ω–µ—è—Å–Ω–æ—Å—Ç–∏

### –í–°–ï–ì–î–ê –î–ï–õ–ê–ô–¢–ï:
‚úì –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ thinking –¥–ª—è requires_thinking="true"
‚úì –í–°–ï–ì–î–ê –≤—ã–≤–æ–¥–∏—Ç–µ mandatory_output –¥–ª—è output="required"
‚úì –í–°–ï–ì–î–ê –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ exit_conditions / checkpoints / conditions
‚úì –í–°–ï–ì–î–ê –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ—Å—å –ø—Ä–∏ critical failures
‚úì –í–°–ï–ì–î–ê —Å–ø—Ä–∞—à–∏–≤–∞–π—Ç–µ –ø—Ä–∏ –Ω–µ—è—Å–Ω–æ—Å—Ç–∏
‚úì –í–°–ï–ì–î–ê –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
‚úì –í–°–ï–ì–î–ê –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏

---

## 5. STANDARD FORMATS

### –§–æ—Ä–º–∞—Ç Thinking:
```xml
<thinking>
–ö–û–ù–¢–ï–ö–°–¢: [—Ç–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è]
–ó–ê–î–ê–ß–ê: [—á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å]
–û–ü–¶–ò–ò: [–≤–∞—Ä–∏–∞–Ω—Ç—ã —Å –ø–ª—é—Å–∞–º–∏/–º–∏–Ω—É—Å–∞–º–∏]
–í–´–ë–û–†: [–≤–∞—Ä–∏–∞–Ω—Ç N] –ø–æ—Ç–æ–º—É —á—Ç–æ [–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ]
–†–ò–°–ö–ò: [—á—Ç–æ –º–æ–∂–µ—Ç –ø–æ–π—Ç–∏ –Ω–µ —Ç–∞–∫]
–ü–†–û–í–ï–†–ö–ê: [–∫–∞–∫ –≤–∞–ª–∏–¥–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç]
</thinking>
```

### –§–æ—Ä–º–∞—Ç Error Message:
```
[ICON] –û–®–ò–ë–ö–ê: [–¢–∏–ø]
–ü—Ä–æ–±–ª–µ–º–∞: [–æ–ø–∏—Å–∞–Ω–∏–µ]
–ö–æ–Ω—Ç–µ–∫—Å—Ç: [–≥–¥–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ]
–î–µ–π—Å—Ç–≤–∏–µ: [STOP/RETRY/ASK]
```

### –§–æ—Ä–º–∞—Ç Checkpoint:
```
PHASE N CHECKPOINT:
[‚úì/‚úó] Check 1: [–¥–µ—Ç–∞–ª–∏]
–†–ï–ó–£–õ–¨–¢–ê–¢: ‚úì PASSED / ‚úó FAILED
–ü–µ—Ä–µ—Ö–æ–¥: [ALLOWED/BLOCKED]
```
---

## Code Style Guidelines

### –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –∫–æ–¥ - –∫–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞

**–§–∏–ª–æ—Å–æ—Ñ–∏—è:** –ö–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–∞–º–æ–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ–º—ã–º. –•–æ—Ä–æ—à–∏–µ –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö/—Ñ—É–Ω–∫—Ü–∏–π –ª—É—á—à–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.

#### 1. –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ (–≤–º–µ—Å—Ç–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤)
```python
# ‚ùå –ü–õ–û–•–û
def calc(d, m, y):  # –í—ã—á–∏—Å–ª—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π
    ...

# ‚úÖ –•–û–†–û–®–û
def calculate_days_in_period(start_date, end_date, include_weekends):
    ...
```

#### 2. –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è (–≤–º–µ—Å—Ç–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤)
```python
# ‚ùå –ü–õ–û–•–û
def process_data(data):
    # –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
    if not data or len(data) == 0:
        raise ValueError()

    # –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
    active = [d for d in data if d.is_active]

    # –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
    ...

# ‚úÖ –•–û–†–û–®–û
def process_data(data):
    validate_data(data)
    active_records = filter_active_records(data)
    grouped = group_by_category(active_records)
    ...
```

#### 3. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ - —Ç–æ–ª—å–∫–æ "–ü–æ—á–µ–º—É", –Ω–µ "–ß—Ç–æ"
```python
# ‚ùå –ü–õ–û–•–û - –æ–±—ä—è—Å–Ω—è–µ—Ç –ß–¢–û –¥–µ–ª–∞–µ—Ç –∫–æ–¥
# –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
current_user = get_current_user()

# ‚úÖ –•–û–†–û–®–û - –æ–±—ä—è—Å–Ω—è–µ—Ç –ü–û–ß–ï–ú–£
# FIXME: Workaround –¥–ª—è bug –≤ SQLAlchemy 1.4.x - –Ω—É–∂–µ–Ω explicit refresh
session.refresh(user)

# ‚úÖ –•–û–†–û–®–û - –æ–±—ä—è—Å–Ω—è–µ—Ç –Ω–µ–æ—á–µ–≤–∏–¥–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ
# Use closure table for O(1) hierarchy queries instead of recursive CTE
descendants = get_subtree(article_id)
```

#### 4. Type Hints –≤–º–µ—Å—Ç–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
```python
# ‚ùå –ü–õ–û–•–û
def get_facts(article_id, start, end):
    """
    Args:
        article_id: ID —Å—Ç–∞—Ç—å–∏ (int)
        start: –ù–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞ (date)
        end: –ö–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞ (date)
    Returns:
        –°–ø–∏—Å–æ–∫ —Ñ–∞–∫—Ç–æ–≤ (list of BudgetFact)
    """
    ...

# ‚úÖ –•–û–†–û–®–û
def get_facts(
    article_id: int,
    start: date,
    end: date
) -> list[BudgetFact]:
    """Get budget facts for article in date range."""
    ...
```

#### 5. Docstrings - –∫—Ä–∞—Ç–∫–∏–µ –∏ –ø–æ–ª–µ–∑–Ω—ã–µ
```python
# ‚ùå –ü–õ–û–•–û - –æ—á–µ–≤–∏–¥–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
def create_user(email: str, password: str) -> User:
    """
    Creates a new user.

    This function creates a new user with the provided email and password.
    It takes an email and password as parameters and returns a User object.
    """
    ...

# ‚úÖ –•–û–†–û–®–û - –ø–æ–ª–µ–∑–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
def create_user(email: str, password: str) -> User:
    """Create user with hashed password. Raises ValueError if email exists."""
    ...
```

#### 6. –£–¥–∞–ª—è—Ç—å, –Ω–µ –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å
```python
# ‚ùå –ü–õ–û–•–û - –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
def calculate_total(facts):
    total = sum(f.amount for f in facts)
    # old_total = 0
    # for fact in facts:
    #     old_total += fact.amount
    return total

# ‚úÖ –•–û–†–û–®–û - —á–∏—Å—Ç—ã–π –∫–æ–¥ (—Å—Ç–∞—Ä—ã–π –∫–æ–¥ –≤ git history)
def calculate_total(facts):
    return sum(f.amount for f in facts)
```

### –ö–æ–≥–¥–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´

1. **–°–ª–æ–∂–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã:**
```python
def calculate_installment(amount, rate, months):
    """Calculate monthly installment using annuity formula."""
    # Annuity coefficient: i * (1 + i)^n / ((1 + i)^n - 1)
    # where i = monthly rate, n = number of months
    monthly_rate = rate / 12 / 100
    coefficient = (monthly_rate * (1 + monthly_rate) ** months) / \
                  ((1 + monthly_rate) ** months - 1)
    return amount * coefficient
```

2. **Workarounds –∏ TODO:**
```python
# TODO: Migrate to async SQLAlchemy 2.0 syntax (blocking on library support)
session.execute(text(query))

# FIXME: –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ hierarchy service
# Workaround –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```

3. **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
```python
@router.post("/facts")
async def create_fact(data: FactCreate, current_user: CurrentUser):
    """Create new budget fact. Validates amount > 0 and date <= today."""
    ...
```

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã

‚úÖ **DO:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞: `user_active_subscriptions` –≤–º–µ—Å—Ç–æ `uas`
- –†–∞–∑–±–∏–≤–∞–π—Ç–µ –±–æ–ª—å—à–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏–µ —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏
- –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ type hints –≤–µ–∑–¥–µ
- –ü–∏—à–∏—Ç–µ –∫—Ä–∞—Ç–∫–∏–µ docstrings –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö API
- –û–±—ä—è—Å–Ω—è–π—Ç–µ "–ø–æ—á–µ–º—É", –Ω–µ "—á—Ç–æ"

‚ùå **DON'T:**
- –ù–µ –ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥—É–±–ª–∏—Ä—É—é—Ç –∫–æ–¥
- –ù–µ –æ—Å—Ç–∞–≤–ª—è–π—Ç–µ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ git)
- –ù–µ –ø–∏—à–∏—Ç–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- –ù–µ –æ–±—ä—è—Å–Ω—è–π—Ç–µ –æ—á–µ–≤–∏–¥–Ω–æ–µ
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤–º–µ—Å—Ç–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

**–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ:** –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, —á—Ç–æ–±—ã –æ–±—ä—è—Å–Ω–∏—Ç—å "—á—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥" - —É–ª—É—á—à–∏—Ç–µ –∫–æ–¥. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è "–ø–æ—á–µ–º—É –∫–æ–¥ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç–∞–∫".

---

## Changelog –≤ GitHub

**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û–ï –ø—Ä–∞–≤–∏–ª–æ:** –ö–∞–∂–¥–∞—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞ –î–û–õ–ñ–ù–ê –∏–º–µ—Ç—å changelog entry –¥–ª—è GitHub Release.

### –§–æ—Ä–º–∞—Ç Changelog Entry

```markdown
### [–ö–∞—Ç–µ–≥–æ—Ä–∏—è] –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (–¥–æ 80 —Å–∏–º–≤–æ–ª–æ–≤)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚ú® –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- üîß –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ
- üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫
- üìù –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
[–ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—Å—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
- –§–∞–π–ª—ã: `[—Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤]`
- PRD: [—Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–µ–∫—Ü–∏—é PRD, –Ω–∞–ø—Ä–∏–º–µ—Ä FR-015]
- Commits: [—Å–ø–∏—Å–æ–∫ commit hash]

**Breaking Changes:** [–µ—Å–ª–∏ –µ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è]
```

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏

- **Features** - –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (feat:)
- **Bug Fixes** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ (fix:)
- **Performance** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (perf:)
- **Refactoring** - —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ (refactor:)
- **Documentation** - —Ç–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (docs:)
- **Infrastructure** - DevOps, CI/CD, deployment (chore:)

### –ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å Release

**GitHub Releases —Å–æ–∑–¥–∞—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é –ø—Ä–∏:**
1. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∫—Ä—É–ø–Ω–æ–π —Ñ–∏—á–∏ (milestone)
2. –ù–∞–∫–æ–ø–ª–µ–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–∞–∂–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
3. –†–µ–ª–∏–∑–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ (—Å–ª–µ–¥—É—è semver)

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –°–æ–±—Ä–∞—Ç—å –≤—Å–µ changelog entries —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–ª–∏–∑–∞
2. GitHub ‚Üí Releases ‚Üí Draft a new release
3. –°–æ–∑–¥–∞—Ç—å —Ç–µ–≥ –≤–µ—Ä—Å–∏–∏ (v1.2.0, v1.2.1, v2.0.0)
4. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å changelog entries, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
5. Publish release

### –ü—Ä–∞–≤–∏–ª–∞ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (Semver)

- **MAJOR (v2.0.0)** - breaking changes
- **MINOR (v1.2.0)** - –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (backward compatible)
- **PATCH (v1.2.1)** - bug fixes

### –ü—Ä–∏–º–µ—Ä

```markdown
## v1.3.0 - 2025-11-15

### Features
#### ‚ú® –£–¥–∞–ª–µ–Ω —Ñ–∏–ª—å—Ç—Ä "–ù–µ–¥–µ–ª—è" –∏–∑ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –£–¥–∞–ª–µ–Ω preset "week" –∏–∑ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–µ—Ä–∏–æ–¥–æ–≤
- –£–¥–∞–ª–µ–Ω–∞ backend –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ weekly —Ñ–∏–ª—å—Ç—Ä–∞
- –û–±–Ω–æ–≤–ª–µ–Ω UI - –æ—Å—Ç–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ: –º–µ—Å—è—Ü, –∫–≤–∞—Ä—Ç–∞–ª, –≥–æ–¥, –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–æ–ª—å—à–µ –Ω–µ —É–≤–∏–¥—è—Ç –∫–Ω–æ–ø–∫—É "–ù–µ–¥–µ–ª—è" –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ. –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –Ω–µ–¥–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ "–ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥".

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
- –§–∞–π–ª—ã: `frontend/web/static/js/analytics.js`, `backend/app/api/v1/endpoints/analytics.py`
- PRD: FR-042
- Commits: abc123f, def456g

**Breaking Changes:** –ù–µ—Ç
```

